@model Pooshineh.Models.Table_Products

@{
    ViewBag.Title = "Details";
    Pooshineh.Models.ClothingStoreEntities1 db = new Pooshineh.Models.ClothingStoreEntities1();
    var user = db.Table_User.Where(u => u.PhoneNumber == User.Identity.Name).SingleOrDefault();
    bool isLoggedIn = true;
    if (string.IsNullOrWhiteSpace(User.Identity.Name))
    {
        isLoggedIn = false;
    }

}



<div class="container">
    <h4>Table_Products</h4>
    <hr />
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.ProductName)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.ProductName)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.ProductDescription)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.ProductDescription)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.ProductImagePath)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.ProductImagePath)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.ProductPrice)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.ProductPrice)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.ProductQuantity)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.ProductQuantity)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Table_Categories.CategoryName)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Table_Categories.CategoryName)
        </dd>

    </dl>
</div>
@if (isLoggedIn)
{
    if (user.RoleID == 1)

    {
        @Html.ActionLink("ویرایش", "Edit", "Products", new { productId = Model.ProductID, quantity = 1 }, new { @class = "btn btn-warning mx-2" });
        @Html.ActionLink("حذف", "Delete", new { id = Model.ProductID }, new { @class = "btn btn-danger mx-2" })
    }
    else
    {
        if (Model.ProductQuantity <= 0)
        {
            <button class="btn btn-danger p-2" disabled>ناموجود</button>
        }
        else
        {
            @Html.ActionLink("افزودن به سبد خرید", "AddToCart", "Cart", new { productId = Model.ProductID, quantity = 1 }, new { @class = "btn btn-success mx-2" });
        }
    }

}
else
{
    if (Model.ProductQuantity <= 0)
    {
        <button class="btn btn-danger p-2" disabled>ناموجود</button>
    }
    else
    {
        @Html.ActionLink("افزودن به سبد خرید", "AddToCart", "Cart", new { productId = Model.ProductID, quantity = 1 }, new { @class = "btn btn-success mx-2" });
    }
}




